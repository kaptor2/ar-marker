<!DOCTYPE html>
<html>

<head>
	<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>

<body>
	<video id="video" playsinline style="
		position: fixed;
		top: 50%;
		left: 50%;
		min-width: 100%;
		min-height: 100%;
		width: auto;
		height: auto;
		z-index: -100;
		transform: translateX(-50%) translateY(-50%);
		background: no-repeat;
		background-size: cover;"></video>
	<a-scene>
		<a-video id="appello" src="./video/Appello.mp4" position="0 0 -1.2" rotation="0 0 0" scale="0.5 0.25 0.25">
		</a-video>
		<a-entity camera look-controls></a-entity>
	</a-scene>

	<button id="startButton" style="
		position: fixed;
		top: 50%;
		left: 50%;
		transform: translateX(-50%) translateY(-50%);
		padding: 20px;
		font-size: 20px;
		z-index: 100;">Start</button>

	<script>
		const video = document.querySelector('#video');
		const video2 = document.querySelector('#appello');
		const startButton = document.querySelector('#startButton');
		const constraints = { video: true };

		startButton.addEventListener('click', function () {
			navigator.mediaDevices.getUserMedia(constraints)
				.then((stream) => {
					video.srcObject = stream;

					video.play();
					video2.play();

					const scene = document.querySelector('a-scene');
					scene.addEventListener('loaded', () => {
						scene.setAttribute('background', 'src: #video');
					});
					startButton.style.display = 'none';
				});
		}, false);
	</script>
</body>

</html>