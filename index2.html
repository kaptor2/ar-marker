<!DOCTYPE html>
<html>

<head>
	<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>

<body>
	<video id="video" playsinline style="
		position: fixed;
		top: 50%;
		left: 50%;
		min-width: 100%;
		min-height: 100%;
		width: auto;
		height: auto;
		z-index: -100;
		transform: translateX(-50%) translateY(-50%);
		background: no-repeat;
		background-size: cover;"></video>
	<a-scene>
		<a-video id="aVideo" src="./video/Appello.mp4" position="0 0 -1.2" muted rotation="0 0 0" scale="1 0.5 0.5"
			play>
		</a-video>
		<a-entity camera look-controls></a-entity>
	</a-scene>

	<button id="startButton" style="
		position: fixed;
		top: 50%;
		left: 50%;
		transform: translateX(-50%) translateY(-50%);
		padding: 20px;
		font-size: 20px;
		z-index: 100;">Начать</button>

	<script>
		const video = document.querySelector('#video');
		const aVideo = document.querySelector('#aVideo');
		const startButton = document.querySelector('#startButton');
		const constraints = { video: { facingMode: "environment" } };

		startButton.addEventListener('click', function () {
			navigator.mediaDevices.getUserMedia(constraints)
				.then((stream) => {
					video.srcObject = stream;
					video.play();
					const scene = document.querySelector('a-scene');
					scene.addEventListener('loaded', () => {
						scene.setAttribute('background', 'src: #video');
					});
					startButton.style.display = 'none';
				});
		}, false);
	</script>
</body>

</html>